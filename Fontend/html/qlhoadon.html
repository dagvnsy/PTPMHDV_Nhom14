<div ng-controller="AdminHoaDonCtrl">

    <h3>Quản lý học phí / hóa đơn</h3>

    <!-- TOOLBAR -->
    <div class="toolbar">
        <select ng-model="trangThaiLoc" ng-change="locTrangThai()">
            <option value="">-- Tất cả trạng thái --</option>
            <option value="CHUA_THANH_TOAN">Chưa thanh toán</option>
            <option value="DA_THANH_TOAN">Đã thanh toán</option>
        </select>
        <button ng-click="taiLai()">Tải lại</button>
    </div>

    <!-- BẢNG -->
    <table class="bang">
        <thead>
            <tr>
                <th>Học viên</th>
                <th>Lớp học</th>
                <th>Số tiền</th>
                <th>Ngày lập</th>
                <th>Trạng thái</th>
                <th>Ghi chú</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="hd in dsHoaDon">
                <td>{{hd.TenHocVien}}</td>
                <td>{{hd.TenLopHoc}}</td>
                <td>{{hd.SoTien | number}} đ</td>
                <td>{{hd.NgayLap | date:'dd/MM/yyyy'}}</td>
                <td>{{hd.TrangThai}}</td>
                <td>{{hd.GhiChu}}</td>
                <td>
                    <button class="btn" ng-click="moSua(hd)">Sửa</button>
                    <button class="btn" ng-click="xoa(hd.IdHoaDon)">Xóa</button>
                </td>
            </tr>
        </tbody>
    </table>

    <p ng-if="dsHoaDon.length == 0">Không có hóa đơn</p>

    <!-- MODAL -->
    <div class="modal" ng-if="dangMo">
        <div class="modal-box">
            <h3>Sửa hóa đơn</h3>

            <p><b>Học viên:</b> {{hd.TenHocVien}}</p>
            <p><b>Lớp:</b> {{hd.TenLopHoc}}</p>
            <p><b>Số tiền:</b> {{hd.SoTien | number}} đ</p>

            <select ng-model="hd.TrangThai">
                <option value="CHUA_THANH_TOAN">Chưa thanh toán</option>
                <option value="DA_THANH_TOAN">Đã thanh toán</option>
            </select>

            <input ng-model="hd.GhiChu" placeholder="Ghi chú">

            <div>
                <button class="nut" ng-click="luu()">Lưu</button>
                <button class="nut" ng-click="dong()">Hủy</button>
            </div>
        </div>
    </div>

</div>
